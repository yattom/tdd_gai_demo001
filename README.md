# 生成AIとTDDでTCGを作るデモ

CC-BY 4.0
Copyright(C)2024 合同会社やっとむ屋、やっとむ <yattom@yattom.jp>

## 解説

- 生成AIとペアプロをする風味で、TDDを実践するデモをやります
- 特に準備をしているわけではないので、どうなるかわかりません
- 時間を60分間とします。10分ごとにふりかえりをしようと思います
- お題は事前に生成しておきました
  - AIに読んでもらえるようREADMEに書いています
- またどんなふうに生成AI、ペアプロ、TDDをしたいと思っているか、下に書いてあります
  - とりあえず考えてみたレベルの内容
  - これもAIが読んでくれることを想定しています
- 日本語の切り替えが不調法なので、英語と混ぜて書くと思います (キーバインドがヘボですみません)
- 言語はPython、テストはpytest、開発環境はIntelliJ IDEA、生成AIはJetBrains AI Assistantです
  - Python 3.13
  - pytest 8.3.3
  - IntelliJ IDEA 2024.3
  - AI Assistant 243.21565.247

## TCGの仕様

プレイヤー同士が1対1で対戦するシンプルなトレーディングカードゲーム(TCG)を実装してください。各プレイヤーは20のライフポイントと、固定の5枚のカードデッキを持ちます。各カードには攻撃力（1～5）が設定されています。ターン制で進行し、プレイヤーはターンごとに1枚のカードを使用して相手にダメージを与えます。ライフが0以下になったプレイヤーが敗北します。デッキのシャッフルや、ターンの管理も行う必要があります。

## テストリスト


## 生成AIとペアプロでTDDする

人と生成AIがペアプロでTDDするのにあたり、以下の役割分担や、テクニック、やりとりをしながら進めます。

- 仕様を貼り付けてテストリストを作る
  - テストケースではなく、実装を進めるために仕様・機能を取り扱いやす大きさで切り出して並べる
  - 全体を網羅できるようトップレベルの項目を出してから、進める順序に応じて細分化していく
  - トップレベルは、機能分割の場合と、状況や場合で分割する場合があり、適切なアプローチを選ぶ
  - どうなるかわからない箇所、イメージしにくい箇所、リスクがある箇所をできるだけ早く着手する
  - 着手するものは具体的なテストケースにする
- テストを書いてレッドにする
  - アサート部分を人が書く。あるいはアサートしたいことをコメントで人が書いてコードをAIに書いてもらう
  - 実行部分に新しい型やメソッドが登場するなら、命名やシグネチャをAIと相談しながら書く
  - 既存のものを呼ぶだけならば、準備と実行部分はAIに任せて人が確認する
  - テストを実行する前に、結果をAIと一緒に予想する
  - 実行して予想と合っているか確認する
- グリーンになるよう実装する
  - 基本的にはAIに書いてもらう
  - テストを実行し、グリーンにならなかったら、AIに情報を渡して直してもらう
  - 簡単に直らないようなら (あるいは人が問題に気づいたら) 人が直接直すか、AIに情報を追加で渡す
- リファクタリング
  - 人がコードを容易に理解できるようなリファクタリングをする。人が直接書いてもいいし、方針をAIに伝えてもいい
  - よりシンプルな構造になるようなテストを追加で書いて、AIのリファクタリングを引き出す
  - テストが多いときは、テストの重複除去や整理ができないか、AIと一緒に検討する
